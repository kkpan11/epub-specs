<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 34.1.8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
:is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
.example pre{background-color:rgba(0,0,0,.03)}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
		
		
<title>The EPUB Accessibility exemption property</title>
		
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
		
		
		
<style>

			pre {
				white-space: break-spaces !important;
			}
			td.top {
				vertical-align: top;
			}
</style>
	
<style>

ul.nomark,
ol.nomark {
    list-style-type: none;
}

ol.cmt,
ul.flat {
	list-style-type: none;
	padding-left: 0;
}

ol.cmt {
	margin: 0;
}

dl.elemdef {
    border-left: 0.5em solid rgb(145,200,255);
    background-color: rgb(236,246,255);
    padding: 0.5em 1em;
	margin-bottom: 2em;
}

dl.elemdef ul.nomark {
	padding-left: 1em;
}

dl.elemdef > dd > ul.nomark:first-child {
	padding-left: 0 !important;
}

dl.conformance-list > dd {
    margin-top: 0.7em;
}

dl.elemdef > dt,
table.tabledef th {
	font-weight: normal;
	font-style: italic;
}

dl.elemdef > dt {
	margin-bottom: 0.5em;
}

dl.elemdef dfn {
	font-style: normal;
}

/*  EBNF tables */


table.productionset {
    border: none;
    border-left: 5px solid rgb(145,200,255);
    background-color: rgb(236,246,255);
}

table.productionset caption {
	text-align: left;
	font-size: 80%;
	font-style: normal;
}

table.productionset tbody tr {
    border: none;
}

table.productionset tbody tr td {
    border: none;
    padding: 0.5em;
    border-bottom: 1px solid #ddd;
}

table.productionset tbody tr td a {
    text-decoration: none;
    border-bottom: 1px dotted #000090;
}

table.productionset tbody tr td a:hover {
    text-decoration: underline;
}

table.productionset tbody tr td a:visited,
table.productionset tbody tr td a:active,
table.productionset tbody tr td a:hover {
    color: #000090;
}

a.deprecated,
a.legacy {
	font-size: 85%;
	text-transform: uppercase;
}

/* styles for core media types */

table#tbl-core-media-types {
    border-spacing: 0px;
    padding: 1em;
    margin-top: 1.5em;
    margin-bottom: 2em;    
}

table#tbl-core-media-types th {
    border-bottom: 1px solid #005A9C;
    font-weight: bold;
    padding: 0.5em;
    font-weight: bold;
    color: #000090;
    font-size: 90%
}

table#tbl-core-media-types td {
    border-bottom: 1px solid #005A9C;
    border-right: 1px solid #efefef;
    padding: 0.5em;
    text-align: left
}

table#tbl-core-media-types tr td:last-child {
    border-right: none;
}

table#tbl-core-media-types td *, table#tbl-core-media-types td > * {
    text-align: left;
}

table#tbl-core-media-types, table#tbl-core-media-types tbody {
    padding: 0;
}

table#tbl-core-media-types caption {
    text-align: left;
    font-size: 90%
}

.tbl-group {
	text-align: left;
	border-bottom: none;
	color: rgb(0, 0, 0);
	background-color: rgb(240, 248, 255);
}

table#tbl-core-media-types > thead > tr > th {
    background-color: rgb(240,240,240);
    text-align: left;
    white-space:nowrap;
}

table#tbl-core-media-types > tbody > tr > th {    
    text-align: left;
    font-weight: normal;
    font-style: italic;
    padding: 3px;
}

table#tbl-core-media-types td, table#tbl-core-media-types th, table#tbl-core-media-types tr {
    border-color: #005A9C;
    margin: 0em;
}

table#tbl-core-media-types td code, table#tbl-core-media-types td a {
    white-space:nowrap;
}

td[headers="tbl-cmt-appl"] {
    font-size: .9em;
}




/****************************************************/
/*  property tables                                 */
/****************************************************/

/* ensure confomity of width for property tables */
table.tabledef {
	border-spacing: 0px;
	border: none;
	font-size: 1em;
	width: 100%
}

table.tabledef td, table.tabledef th {
	border: none;
	background-color: rgb(236,246,255);
	color: rgb(0,0,0);
	padding: 0.3em;
	vertical-align: top;
}

table.tabledef th {
    text-align: left;
	vertical-align: top;
    width: 8em;
    padding-left: 1em;
}

table.tabledef th {
    border-left: 5px solid rgb(145,200,255);
}

table.tabledef td {
    padding: 3px 3px 3px 10px;
}

table.tabledef td > p:first-child {
	padding: 0em;
	margin: 0em
}


/* Reserved prefix tables */

table.prefix {
    border-spacing: 0px;
    padding: 1em;
    margin-top: 1.5em;
    margin-bottom: 2em;    
}
table.prefix th {
    border-bottom: 1px solid #005A9C;
    font-weight: bold;
    padding: 0.5em;
    font-weight: bold;
    color: #000090;
    font-size: 90%
}
table.prefix td {
    border-bottom: 1px solid #005A9C;
    border-right: 1px solid #efefef;
    padding: 0.5em;
    text-align: left
}
table.prefix tr td:last-child {
    border-right: none;
}
table.prefix td *, table.prefix td > * {
    text-align: left;
}
table.prefix, table.prefix tbody {
    padding: 0;
}

table.prefix caption {
    text-align: left;
    font-size: 90%
}


/* Table zebra style... */

table.zebra {
    font-size:inherit;
    font:90%;
    margin:1em;
}

table.zebra td {
    padding-left: 0.3em;
}

table.zebra th {
    font-weight: bold;
    text-align: center;
    background-color: rgb(0,0,128) !important;
    font-size: 110%;
    background: hsl(180, 30%, 50%);
    color: #fff;
}

table.zebra th a:link {
  color: #fff;
}

table.zebra th a:visited {
  color: #aaa;
}

table.zebra tr:nth-child(even) {
    background-color: hsl(180, 30%, 93%) !important;
}

table.zebra th{border-bottom:1px solid #bbb;padding:.2em 1em;}
table.zebra td{border-bottom:1px solid #ddd;padding:.2em 1em;}


p.support {
	border-left: 0.4rem solid rgb(255,255,0);
	background-color: rgb(255,255,230);
	padding: 0.7rem;
}

p.caution, div.caution {
	padding: 0.5rem;
	border-left: 0.5rem solid rgb(255,140,0);
	background-color: rgb(254,236,207);
}

div.caution-title > span {
	color: rgb(140,40,0);
	text-transform: uppercase;
}

details.desc {
	margin-top: -2.5rem !important;
	margin-left: 3rem !important;
}

details.explanation, details.desc {
	background-color: rgb(245,245,245);
	border-left: 0.3em solid rgb(200,200,200);
	padding: 0.3em;
}

details.explanation > summary, details.desc > summary {
	font-size: small;
	text-align: left;
    font-weight: normal !important;
    font-style: italic;
}

/* Give a slightly different aspect to epubcheck test references */
a.epubcheck {
    background-color: antiquewhite ;
}


</style>
<meta name="description" content="The exemption property allows EPUB creators to indicate that an EPUB publication that does
				not meet accessibility conformance requirements has an exemption under the applicable jurisdiction's
				laws.">
<link rel="canonical" href="https://www.w3.org/TR/epub-a11y-exemption/">
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "group": "pm",
  "wgPublicList": "public-pm-wg",
  "specStatus": "NOTE",
  "shortName": "epub-a11y-exemption",
  "noRecTrack": true,
  "edDraftURI": "https://w3c.github.io/epub-specs/epub33/a11y-exemption/",
  "copyrightStart": "2023",
  "editors": [
    {
      "name": "Matt Garrish",
      "company": "DAISY Consortium",
      "companyURL": "https://daisy.org",
      "w3cid": 51655
    },
    {
      "name": "Gregorio Pellegrino",
      "company": "Fondazione LIA",
      "companyURL": "https://www.fondazionelia.org",
      "w3cid": 97111
    }
  ],
  "includePermalinks": true,
  "permalinkEdge": true,
  "permalinkHide": false,
  "github": {
    "repoURL": "https://github.com/w3c/epub-specs",
    "branch": "main"
  },
  "preProcess": [
    null
  ],
  "xref": {
    "profile": "web-platform",
    "specs": [
      "epub-33"
    ]
  },
  "localBiblio": {
    "epub-a11y": {
      "title": "EPUB Accessibility",
      "href": "https://www.w3.org/TR/epub-a11y/",
      "publisher": "W3C",
      "id": "epub-a11y"
    },
    "directive-2019/882": {
      "title": "Directive (EU) 2019/882 of the European Parliament and of the Council of 17 April 2019 on the accessibility requirements for products and services",
      "href": "https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX%3A32019L0882",
      "publisher": "European Union",
      "id": "directive-2019/882"
    }
  },
  "publishDate": "2023-10-03",
  "publishISODate": "2023-10-03T00:00:00.000Z",
  "generatedSubtitle": "W3C Group Note 03 October 2023"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-NOTE"></head>
	<body class="h-entry" data-cite="epub-33 HTML INFRA URL WEBIDL DOM FETCH"><div class="head">
    <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
  </a></p>
    <h1 id="title" class="title">The EPUB Accessibility <code>exemption</code> property</h1> 
    <p id="w3c-state"><a href="https://www.w3.org/standards/types#NOTE">W3C Group Note</a> <time class="dt-published" datetime="2023-10-03">03 October 2023</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        <dt>This version:</dt><dd>
                <a class="u-url" href="https://www.w3.org/TR/2023/NOTE-epub-a11y-exemption-20231003/">https://www.w3.org/TR/2023/NOTE-epub-a11y-exemption-20231003/</a>
              </dd>
        <dt>Latest published version:</dt><dd>
                <a href="https://www.w3.org/TR/epub-a11y-exemption/">https://www.w3.org/TR/epub-a11y-exemption/</a>
              </dd>
        <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/epub-specs/epub33/a11y-exemption/">https://w3c.github.io/epub-specs/epub33/a11y-exemption/</a></dd>
        <dt>History:</dt><dd>
                    <a href="https://www.w3.org/standards/history/epub-a11y-exemption/">https://www.w3.org/standards/history/epub-a11y-exemption/</a>
                  </dd><dd>
                    <a href="https://github.com/w3c/epub-specs/commits/main">Commit history</a>
                  </dd>
        
        
        
        
        
        <dt>Editors:</dt><dd class="editor p-author h-card vcard" data-editor-id="51655">
    <span class="p-name fn">Matt Garrish</span> (<a class="p-org org h-org" href="https://daisy.org">DAISY Consortium</a>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="97111">
    <span class="p-name fn">Gregorio Pellegrino</span> (<a class="p-org org h-org" href="https://www.fondazionelia.org">Fondazione LIA</a>)
  </dd>
        
        
        <dt>Feedback:</dt><dd>
        <a href="https://github.com/w3c/epub-specs/">GitHub w3c/epub-specs</a>
        (<a href="https://github.com/w3c/epub-specs/pulls/">pull requests</a>,
        <a href="https://github.com/w3c/epub-specs/issues/new/choose">new issue</a>,
        <a href="https://github.com/w3c/epub-specs/issues/">open issues</a>)
      </dd><dd><a href="mailto:public-pm-wg@w3.org?subject=%5Bepub-a11y-exemption%5D%20YOUR%20TOPIC%20HERE">public-pm-wg@w3.org</a> with subject line <kbd>[epub-a11y-exemption] <em>… message topic …</em></kbd> (<a rel="discussion" href="https://lists.w3.org/Archives/Public/public-pm-wg">archives</a>)</dd>
        
        
      </dl>
    </details>
    
    
    <p class="copyright">
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    ©
    2023
    
    <a href="https://www.w3.org/">World Wide Web Consortium</a>.
    <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
    <a rel="license" href="https://www.w3.org/Consortium/Legal/2023/software-license" title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
  </p>
    <hr title="Separator for header">
  </div>
		
		<section id="abstract" class="introductory"><h2>Abstract</h2>
			<p>The <code>exemption</code> property allows EPUB creators to indicate that an EPUB publication that does
				not meet accessibility conformance requirements has an exemption under the applicable jurisdiction's
				laws.</p>
		</section>
		<section id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this
      document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr>
      publications and the latest revision of this technical report can be found
      in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p><p>
    This document was published by the <a href="https://www.w3.org/groups/wg/pm">Publishing Maintenance Working Group</a> as
    a Group Note using the
        <a href="https://www.w3.org/2023/Process-20230612/#recs-and-notes">Note track</a>. 
  </p><p>This Group Note is endorsed by
        the <a href="https://www.w3.org/groups/wg/pm">Publishing Maintenance Working Group</a>, but is not endorsed by
        <abbr title="World Wide Web Consortium">W3C</abbr> itself nor its
        Members. </p><p>
    This is a draft document and may be updated, replaced or obsoleted by other
    documents at any time. It is inappropriate to cite this document as other
    than work in progress.
    
  </p><p data-deliverer="144835">
    
        The
        <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>
        does not carry any licensing requirements or commitments on this
        document.
      
    
  </p><p>
                  This document is governed by the
                  <a id="w3c_process_revision" href="https://www.w3.org/2023/Process-20230612/">12 June 2023 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#sec-intro"><bdi class="secno">1. </bdi>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#sec-overview"><bdi class="secno">1.1 </bdi>Overview</a></li><li class="tocline"><a class="tocxref" href="#sec-terminology"><bdi class="secno">1.2 </bdi>Terminology</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">1.3 </bdi>Conformance</a></li></ol></li><li class="tocline"><a class="tocxref" href="#sec-evaluator-name"><bdi class="secno">2. </bdi>Accessibility conformance exemptions</a></li><li class="tocline"><a class="tocxref" href="#exemption-property"><bdi class="secno">A. </bdi>The <code>exemption</code> property</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#exemption"><bdi class="secno">A.1 </bdi>Definition</a></li><li class="tocline"><a class="tocxref" href="#exemption-values"><bdi class="secno">A.2 </bdi>Exemption values</a></li></ol></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1 </bdi>Normative references</a></li></ol></li></ol></nav>
		<section id="sec-intro"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#sec-intro" aria-label="Permalink for Section 1."></a></div>
			

			<section id="sec-overview"><div class="header-wrapper"><h3 id="x1-1-overview"><bdi class="secno">1.1 </bdi>Overview</h3><a class="self-link" href="#sec-overview" aria-label="Permalink for Section 1.1"></a></div>
				

				<p>Some jurisdictions provide exemptions for meeting accessibility requirements. For example, the <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32019L0882">European
						Accessibility Act</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-directive-2019/882" title="Directive (EU) 2019/882 of the European Parliament and of the Council of 17 April 2019 on the accessibility requirements for products and services">directive-2019/882</a></cite>] provides three exemptions to meeting its
					requirements: to microenterprises that employ fewer than ten people and have an annual turnover not
					exceeding EUR 2 million or an annual balance sheet total not exceeding EUR 2 million, when
					accessible production would prove a disproportionate burden, or when making the content accessible
					would require a fundamental alteration of the product.</p>

				<p>Although it is possible to explain these exemptions in the accessibility summary for an <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a>, plain language statements are not easily processed by machines. A vendor may want to
					know that a publication is exempt before allowing it in their bookstore without an accessibility
					conformance claim, for example.</p>

				<p>This document defines a new property named <code>exemption</code> in the <a href="https://www.w3.org/TR/epub-a11y/#app-vocab-ref">accessibility vocabulary namespace</a>
					[<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-a11y" title="EPUB Accessibility">epub-a11y</a></cite>] to address this need for machine-readable metadata.</p>
			</section>

			<section id="sec-terminology"><div class="header-wrapper"><h3 id="x1-2-terminology"><bdi class="secno">1.2 </bdi>Terminology</h3><a class="self-link" href="#sec-terminology" aria-label="Permalink for Section 1.2"></a></div>
				

				<p>This document uses terminology defined in <a href="https://www.w3.org/TR/epub/#sec-terminology">EPUB
						3.3</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>].</p>

				<div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span></div><div class="">
					<p>Only the first instance of a term in a section links to its definition.</p>
				</div></div>
			</section>

			<section id="conformance"><div class="header-wrapper"><h3 id="x1-3-conformance"><bdi class="secno">1.3 </bdi>Conformance</h3><a class="self-link" href="#conformance" aria-label="Permalink for Section 1.3"></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST NOT</em>, and <em class="rfc2119">SHOULD</em> in this document
        are to be interpreted as described in
        <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p></section>
		</section>
		<section id="sec-evaluator-name"><div class="header-wrapper"><h2 id="x2-accessibility-conformance-exemptions"><bdi class="secno">2. </bdi>Accessibility conformance exemptions</h2><a class="self-link" href="#sec-evaluator-name" aria-label="Permalink for Section 2."></a></div>
			

			<p>When a jurisdiction provides specific legal exemptions for <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publications</a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-creator">EPUB creators</a> whose
				content fails to meet the requirements of the EPUB Accessibility standard [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-a11y" title="EPUB Accessibility">epub-a11y</a></cite>] (or any other
				standard), can use <a href="#exemption-property">the <code>exemption</code> property</a> to indicate
				when their publications fall under one of these provisions.</p>

			<aside class="example" id="example-an-epub-publication-exempt-from-the-european-accessibility-act-s-conformance-requirements"><div class="marker">
    <a class="self-link" href="#example-an-epub-publication-exempt-from-the-european-accessibility-act-s-conformance-requirements">Example<bdi> 1</bdi></a><span class="example-title">: An EPUB publication exempt from the European Accessibility Act's conformance requirements</span>
  </div>
				<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"dcterms:conformsTo"</span>&gt;</span>none<span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"a11y:exemption"</span>&gt;</span>eaa-microenterprise<span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span></code></pre>
			</aside>

			<div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div><div class="">
				<p>EPUB creators do not have to include an accessibility conformance claim of "<code>none</code>" when
					listing that a publication has an exemption from accessibility requirements, but it is best practice
					to also provide this information. Reading systems that do not recognize the exemption might
					otherwise list the accessibility status as unknown.</p>
			</div></div>

			<p>The property <em class="rfc2119">MAY</em> be repeated to list exemptions for multiple jurisdictions and/or for multiple exemptions
				within a single jurisdiction.</p>

			<aside class="example" id="example-an-epub-publication-with-two-exemptions-from-the-european-accessibility-act"><div class="marker">
    <a class="self-link" href="#example-an-epub-publication-with-two-exemptions-from-the-european-accessibility-act">Example<bdi> 2</bdi></a><span class="example-title">: An EPUB publication with two exemptions from the European Accessibility Act</span>
  </div>
				<pre><code aria-busy="false" class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"dcterms:conformsTo"</span>&gt;</span>none<span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"a11y:exemption"</span>&gt;</span>eaa-microenterprise<span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"a11y:exemption"</span>&gt;</span>eaa-fundamental-alteration<span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span></code></pre>
			</aside>

			<p>The EPUB Accessibility standard does not define exemptions for inaccessible publications. This property
				only exists for jurisdictions where such exemptions are legislated.</p>

			<p>Refer to <a href="#exemption-values" class="sec-ref"><bdi class="secno">A.2 </bdi>Exemption values</a> for the list of currently recognized exemptions.</p>
		</section>
		<section id="exemption-property" class="appendix"><div class="header-wrapper"><h2 id="a-the-exemption-property"><bdi class="secno">A. </bdi>The <code>exemption</code> property</h2><a class="self-link" href="#exemption-property" aria-label="Permalink for Appendix A."></a></div>
			

			<div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="3"><span>Note</span></div><div class="">
				<p>The EPUB Accessibility standard [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-a11y" title="EPUB Accessibility">epub-a11y</a></cite>] reserves the prefix "<code>a11y:</code>" for use with
					properties in the <code>http://idpf.org/epub/vocab/package/a11y/#</code> namespace. <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-creator">EPUB creators</a> do not have to declare a prefix in the <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-package-document">package document</a>.</p>
			</div></div>

			<section id="exemption"><div class="header-wrapper"><h3 id="a-1-definition"><bdi class="secno">A.1 </bdi>Definition</h3><a class="self-link" href="#exemption" aria-label="Permalink for Appendix A.1"></a></div>
				

				<table class="tabledef">
					<caption>Definition of the <code>exemption</code> property</caption>
					<tbody><tr>
						<th>Name:</th>
						<td>
							<code>exemption</code>
						</td>
					</tr>
					<tr>
						<th>Namespace:</th>
						<td>
							<code>http://idpf.org/epub/vocab/package/a11y/#</code>
						</td>
					</tr>
					<tr>
						<th>Description:</th>
						<td>
							<p>Identifies the accessibility exemption the <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a> falls under.</p>
							<p>The value <em class="rfc2119">SHOULD</em> be one of the values listed in <a href="#exemption-values" class="sec-ref"><bdi class="secno">A.2 </bdi>Exemption values</a>.</p>
						</td>
					</tr>
					<tr>
						<th>Allowed value(s):</th>
						<td>
							<code>xsd:string</code>
						</td>
					</tr>
					<tr>
						<th>Cardinality:</th>
						<td>Zero or more</td>
					</tr>
					<tr>
						<th>Extends:</th>
						<td>Only applies to the <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a>. <em class="rfc2119">MUST NOT</em> be used when the <a href="https://www.w3.org/TR/epub-33/#attrdef-refines">refines attribute</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-epub-33" title="EPUB 3.3">epub-33</a></cite>] is present.</td>
					</tr>
					<tr>
						<th>Example:</th>
						<td>
							<pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"dcterms:conformsTo"</span>&gt;</span>none<span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"a11y:exemption"</span>&gt;</span>eaa-microenterprise<span class="hljs-tag">&lt;/<span class="hljs-name">meta</span>&gt;</span></code></pre>
						</td>
					</tr>
				</tbody></table>
			</section>
			<section id="exemption-values"><div class="header-wrapper"><h3 id="a-2-exemption-values"><bdi class="secno">A.2 </bdi>Exemption values</h3><a class="self-link" href="#exemption-values" aria-label="Permalink for Appendix A.2"></a></div>
				

				<table class="zebra">
					<tbody><tr>
						<th>Value</th>
						<th>Definition</th>
					</tr>
					<tr>
						<td class="top">
							<p><code>eaa-disproportionate-burden</code></p>
						</td>
						<td>
							<p><a href="https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32019L0882#d1e2148-70-1">Article 14</a> paragraph 1 of the European Accessibility Act states that its
								accessibility requirements <q>shall apply only to the extent that compliance: …
									(b) does not result in the imposition of a disproportionate burden on the economic
									operators concerned</q> [<cite><a class="bibref" data-link-type="biblio" href="#bib-directive-2019/882" title="Directive (EU) 2019/882 of the European Parliament and of the Council of 17 April 2019 on the accessibility requirements for products and services">directive-2019/882</a></cite>].</p>
							<p>Use of the <code>eaa-disproportionate-burden</code> value indicates an EPUB publication
								is exempt because it would require such a disproportionate burden to make
								accessible.</p>
							<p>EPUB creators are responsible for ensuring their publications meet the legal requirements
								for this exemption.</p>
						</td>
					</tr>
					<tr>
						<td class="top">
							<p><code>eaa-fundamental-alteration</code></p>
						</td>
						<td>
							<p><a href="https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32019L0882#d1e2148-70-1">Article 14</a> paragraph 1 of the European Accessibility Act states that its
								accessibility requirements <q>shall apply only to the extent that compliance: (a) does
									not require a significant change in a product or service that results in the
									fundamental alteration of its basic nature</q> [<cite><a class="bibref" data-link-type="biblio" href="#bib-directive-2019/882" title="Directive (EU) 2019/882 of the European Parliament and of the Council of 17 April 2019 on the accessibility requirements for products and services">directive-2019/882</a></cite>].</p>
							<p>Use of the <code>eaa-fundamental-alteration</code> value indicates an EPUB publication is
								exempt because it would require such a fundamental alteration to make accessible.</p>
							<p>EPUB creators are responsible for ensuring their publications meet the legal requirements
								for this exemption.</p>
						</td>
					</tr>
					<tr>
						<td class="top">
							<p><code>eaa-microenterprise</code></p>
						</td>
						<td>
							<p>The <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32019L0882">European Accessibility Act</a> defines a microenterprise as: <q>an enterprise which
									employs fewer than 10 persons and which has an annual turnover not exceeding EUR 2
									million or an annual balance sheet total not exceeding EUR 2 million</q>
								[<cite><a class="bibref" data-link-type="biblio" href="#bib-directive-2019/882" title="Directive (EU) 2019/882 of the European Parliament and of the Council of 17 April 2019 on the accessibility requirements for products and services">directive-2019/882</a></cite>].</p>
							<p>It further states in <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32019L0882#d1e1798-70-1">Article 4</a> paragraph 5: <q>Microenterprises providing services shall be exempt
									from complying with the accessibility requirements referred to in paragraph 3 of
									this Article and any obligations relating to the compliance with those
									requirements</q> [<cite><a class="bibref" data-link-type="biblio" href="#bib-directive-2019/882" title="Directive (EU) 2019/882 of the European Parliament and of the Council of 17 April 2019 on the accessibility requirements for products and services">directive-2019/882</a></cite>].</p>
							<p>Use of the <code>eaa-microenterprise</code> value indicates that the publisher of an
								<a data-link-type="dfn|abstract-op" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-publication">EPUB publication</a> that does not meet accessibility standards qualifies under the
								definition of a microenterprise.</p>
							<p><a data-link-type="dfn|abstract-op" data-type="dfn" href="https://www.w3.org/TR/epub-33/#dfn-epub-creator">EPUB creators</a> are responsible for ensuring they meet the legal requirements of a
								microenterprise when using this value.</p>
						</td>
					</tr>
				</tbody></table>

				<div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div><div class="">
					<p>To request new values, please <a href="https://www.github.com/w3c/epub-specs/issues">open a new
							issue</a>. When requesting a new value, please provide a unique name that identifies both
						the jurisdiction and the exemption. Requests must cite the legislation that defines the
						exemption.</p>
				</div></div>
			</section>
		</section>
	

<section id="references" class="appendix"><div class="header-wrapper"><h2 id="b-references"><bdi class="secno">B. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix B."></a></div><section id="normative-references"><div class="header-wrapper"><h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>Normative references</h3><a class="self-link" href="#normative-references" aria-label="Permalink for Appendix B.1"></a></div>
    
    <dl class="bibliography"><dt id="bib-directive-2019/882">[directive-2019/882]</dt><dd>
      <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX%3A32019L0882"><cite>Directive (EU) 2019/882 of the European Parliament and of the Council of 17 April 2019 on the accessibility requirements for products and services</cite></a>.  European Union. URL: <a href="https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX%3A32019L0882">https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=CELEX%3A32019L0882</a>
    </dd><dt id="bib-epub-33">[epub-33]</dt><dd>
      <a href="https://www.w3.org/TR/epub-33/"><cite>EPUB 3.3</cite></a>. Ivan Herman; Matt Garrish; Dave Cramer.  W3C. 25 May 2023. W3C Recommendation. URL: <a href="https://www.w3.org/TR/epub-33/">https://www.w3.org/TR/epub-33/</a>
    </dd><dt id="bib-epub-a11y">[epub-a11y]</dt><dd>
      <a href="https://www.w3.org/TR/epub-a11y/"><cite>EPUB Accessibility</cite></a>.  W3C. URL: <a href="https://www.w3.org/TR/epub-a11y/">https://www.w3.org/TR/epub-a11y/</a>
    </dd><dt id="bib-rfc2119">[RFC2119]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd><dt id="bib-rfc8174">[RFC8174]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
    </dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>